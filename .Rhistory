library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
nyc_restaurant_inspections <- read_csv("../data_hw6/DOHMH_New_York_City_Restaurant_Inspection_Results.csv", col_names = TRUE) %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
View(nyc_restaurant_inspections)
restaurants_per_borough <- nyc_restaurant_inspections %>%
mutate(num_restaurants = count(boro, sort = TRUE)) %>%
plot_ly(y = ~num_restaurants, type = "box")
nyc_restaurant_inspections %>%
mutate(num_restaurants = count(boro, sort = TRUE))
restaurants_per_borough <- nyc_restaurant_inspections %>%
group_by(boro) %>%
mutate(num_restaurants = n())
View(restaurants_per_borough)
restaurants_per_borough <- nyc_restaurant_inspections %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
restaurants_per_borough <- nyc_restaurant_inspections %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
restaurants_per_borough <- nyc_restaurant_inspections %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n())
View(restaurants_per_borough)
nyc_restaurant_inspections %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(!is.na(boro))
View(restaurants_per_borough)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro == !is.na(boro))
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(is.na(boro) = FALSE)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(is.na(boro) == FALSE)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(is.na(boro) == FALSE, is.na(zipcode) == FALSE
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(is.na(boro) == FALSE, is.na(zipcode) == FALSE)
View(nyc_restaurant_inspections)
nyc_restaurant_inspections %>%
filter(is.na(boro) == FALSE)
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(is.na(boro) == FALSE) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
filter(nyc_restaurant_inspections, boro == "Missing")
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = str_c("Zipcode:", zipcode)) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box"
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = str_c("Zipcode:", zipcode)) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = str_c("Zipcode:", zipcode)) %>%
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = str_c("Zipcode:", zipcode))
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = stringr::str_c("Zipcode:", zipcode))
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = stringr::str_c("Zipcode:", zipcode)) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = stringr::str_c("Zipcode:", zipcode)) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(text_label = stringr::str_c("Zipcode:", zipcode)) %>%
mutate(num_restaurants_zip = n()) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box", hoverinfosrc = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:", zipcode, num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box", name = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:", zipcode, num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box", hoverinfo = ~text_label)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:", zipcode, num_restaurants_zip))
View(restaurants_per_borough)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode", zipcode,":" num_restaurants_zip))
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode, boro) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode", zipcode,"Num_restaurants:" num_restaurants_zip))
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode,"Num_restaurants:" num_restaurants_zip))
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode))
nyc_restaurant_inspections <- read_csv("../data_hw6/DOHMH_New_York_City_Restaurant_Inspection_Results.csv", col_names = TRUE) %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode))
View(restaurants_per_borough)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box", hoverinfo = ~text_label)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, "Num_restaurants:", num_restaurants_zip))
View(restaurants_per_borough)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, "/nNum_restaurants:", num_restaurants_zip))
View(restaurants_per_borough)
restaurants_per_borough <- nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip))
View(restaurants_per_borough)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box", hoverinfo = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box") %>%
add_trace(x = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box") %>%
add_trace(y = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box", boxpoints = "all", jitter = 0.3, pointpos = -1.8)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box") %>%
add_trace(y = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "scatter", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, type = "scatter", mode = "marker", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n(), zipcode = as.character(zipcode)) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
nyc_restaurant_inspections <- read_csv("../data_hw6/DOHMH_New_York_City_Restaurant_Inspection_Results.csv", col_names = TRUE) %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
# put plotly code in these code chunks to specify the dashboard orientation/plots
nyc_restaurant_inspections %>%
filter(grade %in% c("A", "B", "C")) %>%
select(cuisine_description, grade) %>%
group_by(cuisine_description) %>%
count(grade) %>%
spread(key = grade, value = n) %>%
plot_ly(x = ~cuisine_description, y = ~A, type = 'bar', name = 'A') %>%
add_trace(y = ~B, name = 'B') %>%
layout(yaxis = list(title = 'Count'), barmode = 'stack') %>%
add_trace(y = ~C, name = 'C') %>%
layout(yaxis = list(title = 'Count'), barmode = 'stack')
#How can we improve the axis labels?--hard to read
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "Brooklyn") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "Queens") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
bronx_zip<- nyc_restaurant_inspections %>%
filter(boro == "Bronx") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
staten_zip<- nyc_restaurant_inspections %>%
filter(boro == "Staten Island") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip)
View(manhattan_zip)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "Brooklyn") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name= ~"Brooklyn")
subplot(manhattan_zip, brooklyn_zip)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", text = ~text_label) %>% add_lines(name = ~"Manhattan")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip, type = "scatter", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip, type = "scatter", mode = "marker", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip, type = "scatter", mode = "marker")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, type = "scatter", mode = "marker")
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip))
View(manhattan_zip)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip))
View(manhattan_zip)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name= ~"Manhattan")
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "BROOKLYN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name= ~"Brooklyn")
subplot(manhattan_zip, brooklyn_zip)
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
nyc_restaurant_inspections <- read_csv("../data_hw6/DOHMH_New_York_City_Restaurant_Inspection_Results.csv", col_names = TRUE) %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "BROOKLYN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "QUEENS") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_laelbel)
bronx_zip<- nyc_restaurant_inspections %>%
filter(boro == "BRONX") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
staten_zip<- nyc_restaurant_inspections %>%
filter(boro == "STATEN ISLAND") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "QUEENS") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip, color = ~boro)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_man)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip, color = ~boro)
