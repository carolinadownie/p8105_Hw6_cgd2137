mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
nyc_restaurant_inspections <- read_csv("../data_hw6/DOHMH_New_York_City_Restaurant_Inspection_Results.csv", col_names = TRUE) %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
# put plotly code in these code chunks to specify the dashboard orientation/plots
nyc_restaurant_inspections %>%
filter(grade %in% c("A", "B", "C")) %>%
select(cuisine_description, grade) %>%
group_by(cuisine_description) %>%
count(grade) %>%
spread(key = grade, value = n) %>%
plot_ly(x = ~cuisine_description, y = ~A, type = 'bar', name = 'A') %>%
add_trace(y = ~B, name = 'B') %>%
layout(yaxis = list(title = 'Count'), barmode = 'stack') %>%
add_trace(y = ~C, name = 'C') %>%
layout(yaxis = list(title = 'Count'), barmode = 'stack')
#How can we improve the axis labels?--hard to read
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "Brooklyn") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "Queens") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
bronx_zip<- nyc_restaurant_inspections %>%
filter(boro == "Bronx") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
staten_zip<- nyc_restaurant_inspections %>%
filter(boro == "Staten Island") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip)
View(manhattan_zip)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "Brooklyn") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name= ~"Brooklyn")
subplot(manhattan_zip, brooklyn_zip)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "marker", text = ~text_label) %>% add_lines(name = ~"Manhattan")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", text = ~text_label) %>% add_lines(name = ~"Manhattan")
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip, type = "scatter", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip, type = "scatter", mode = "marker", text = ~text_label)
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip, type = "scatter", mode = "marker")
nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, type = "scatter", mode = "marker")
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "Manhattan") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip))
View(manhattan_zip)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip))
View(manhattan_zip)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name= ~"Manhattan")
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "BROOKLYN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label) %>% add_lines(name= ~"Brooklyn")
subplot(manhattan_zip, brooklyn_zip)
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
nyc_restaurant_inspections <- read_csv("../data_hw6/DOHMH_New_York_City_Restaurant_Inspection_Results.csv", col_names = TRUE) %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "BROOKLYN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "QUEENS") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_laelbel)
bronx_zip<- nyc_restaurant_inspections %>%
filter(boro == "BRONX") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
staten_zip<- nyc_restaurant_inspections %>%
filter(boro == "STATEN ISLAND") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "QUEENS") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip, color = ~boro)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_man)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip, color = ~boro)
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
get_all_inspections <- function(url) {
all_inspections = vector("list", length = 0)
loop_index = 1
chunk_size = 50000
DO_NEXT = TRUE
while (DO_NEXT) {
message("Getting data, page ", loop_index)
all_inspections[[loop_index]] =
GET(url,
query = list(`$order` = "zipcode",
`$limit` = chunk_size,
`$offset` = as.integer((loop_index - 1) * chunk_size)
)
) %>%
content("text") %>%
fromJSON() %>%
as_tibble()
DO_NEXT = dim(all_inspections[[loop_index]])[1] == chunk_size
loop_index = loop_index + 1
}
all_inspections
}
url = "https://data.cityofnewyork.us/resource/9w7m-hzhe.json"
nyc_inspections <- get_all_inspections(url) %>%
bind_rows() %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
library(httr)
get_all_inspections <- function(url) {
all_inspections = vector("list", length = 0)
loop_index = 1
chunk_size = 50000
DO_NEXT = TRUE
while (DO_NEXT) {
message("Getting data, page ", loop_index)
all_inspections[[loop_index]] =
GET(url,
query = list(`$order` = "zipcode",
`$limit` = chunk_size,
`$offset` = as.integer((loop_index - 1) * chunk_size)
)
) %>%
content("text") %>%
fromJSON() %>%
as_tibble()
DO_NEXT = dim(all_inspections[[loop_index]])[1] == chunk_size
loop_index = loop_index + 1
}
all_inspections
}
url = "https://data.cityofnewyork.us/resource/9w7m-hzhe.json"
nyc_inspections <- get_all_inspections(url) %>%
bind_rows() %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
library(jsonlite)
get_all_inspections <- function(url) {
all_inspections = vector("list", length = 0)
loop_index = 1
chunk_size = 50000
DO_NEXT = TRUE
while (DO_NEXT) {
message("Getting data, page ", loop_index)
all_inspections[[loop_index]] =
GET(url,
query = list(`$order` = "zipcode",
`$limit` = chunk_size,
`$offset` = as.integer((loop_index - 1) * chunk_size)
)
) %>%
content("text") %>%
fromJSON() %>%
as_tibble()
DO_NEXT = dim(all_inspections[[loop_index]])[1] == chunk_size
loop_index = loop_index + 1
}
all_inspections
}
url = "https://data.cityofnewyork.us/resource/9w7m-hzhe.json"
nyc_inspections <- get_all_inspections(url) %>%
bind_rows() %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
filter(is.na(grade) == FALSE)
View(nyc_inspections)
View(nyc_inspections)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_man)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "BROOKLYN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "QUEENS") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
bronx_zip<- nyc_restaurant_inspections %>%
filter(boro == "BRONX") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
staten_zip<- nyc_restaurant_inspections %>%
filter(boro == "STATEN ISLAND") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip, color = ~boro)
library(flexdashboard)
library(tidyverse)
library(janitor)
library(stringr)
library(forcats)
library(viridis)
library(plotly)
library(httr)
library(jsonlite)
# put plotly code in these code chunks to specify the dashboard orientation/plots
nyc_restaurant_inspections %>%
filter(grade %in% c("A", "B", "C")) %>%
select(cuisine_description, grade) %>%
group_by(cuisine_description) %>%
count(grade) %>%
spread(key = grade, value = n) %>%
mutate(total = rowSums(cbind(A, B, C), na.rm = TRUE)) %>%
filter(total >= 3000) %>%
plot_ly(x = ~cuisine_description, y = ~A, type = 'bar', name = 'A') %>%
add_trace(y = ~B, name = 'B') %>%
add_trace(y = ~C, name = 'C') %>%
layout(yaxis = list(title = 'Count'), barmode = 'stack') %>%
layout(margin = list(b = 75), xaxis = list(title = "", tickangle = 45)) # `margin` adjusts the space for the x-axis labels
get_all_inspections <- function(url) {
all_inspections = vector("list", length = 0)
loop_index = 1
chunk_size = 50000
DO_NEXT = TRUE
while (DO_NEXT) {
message("Getting data, page ", loop_index)
all_inspections[[loop_index]] =
GET(url,
query = list(`$order` = "zipcode",
`$limit` = chunk_size,
`$offset` = as.integer((loop_index - 1) * chunk_size)
)
) %>%
content("text") %>%
fromJSON() %>%
as_tibble()
DO_NEXT = dim(all_inspections[[loop_index]])[1] == chunk_size
loop_index = loop_index + 1
}
all_inspections
}
url = "https://data.cityofnewyork.us/resource/9w7m-hzhe.json"
nyc_restaurant_inspections <- get_all_inspections(url) %>%
bind_rows() %>%
rename(restaurant_id = camis, restaurant_name = dba) %>%
mutate(cuisine_description = if_else(cuisine_description == "CafÃ©/Coffee/Tea", "Cafe/coffee", cuisine_description),
cuisine_description = if_else(cuisine_description == "Latin (Cuban, Dominican, Puerto Rican, South & Central American)", "Latin", cuisine_description)) %>%
filter(is.na(grade) == FALSE)
nyc_restaurant_inspections %>%
filter(boro != "Missing") %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(y = ~num_restaurants_zip, color = ~boro, type = "box")
#I want the hover label to indicate the zip code corresponding to the number of restaurants, not the boro name, since that is already known--not sure if changing the hover text is possible for box plots
#This doesn't really work
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_man)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "BROOKLYN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "QUEENS") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
bronx_zip<- nyc_restaurant_inspections %>%
filter(boro == "BRONX") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
staten_zip<- nyc_restaurant_inspections %>%
filter(boro == "STATEN ISLAND") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip, color = ~boro)
manhattan_zip<- nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_man)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
brooklyn_zip<- nyc_restaurant_inspections %>%
filter(boro == "BROOKLYN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
queens_zip<- nyc_restaurant_inspections %>%
filter(boro == "QUEENS") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
bronx_zip<- nyc_restaurant_inspections %>%
filter(boro == "BRONX") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
staten_zip<- nyc_restaurant_inspections %>%
filter(boro == "STATEN ISLAND") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_zip = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_zip)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_zip,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
subplot(manhattan_zip, brooklyn_zip, queens_zip, bronx_zip, staten_zip)
nyc_restaurant_inspections %>%
filter(boro == "MANHATTAN") %>%
mutate(zipcode=as.character(zipcode)) %>%
group_by(zipcode) %>%
mutate(num_restaurants_man = n()) %>%
mutate(text_label = stringr::str_c("Zipcode:",zipcode, " Num_restaurants:", num_restaurants_man)) %>%
plot_ly(x= ~zipcode, y = ~num_restaurants_man,color= ~boro, type = "scatter", mode = "marker", text = ~text_label)
